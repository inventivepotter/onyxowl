# Privacy Filter Environment Variables
# Copy this file to .env and customize

# ============================================================================
# API Settings
# ============================================================================
HOST=0.0.0.0
PORT=1001
WORKERS=1
LOG_LEVEL=info

# ============================================================================
# GLiNER Model Settings
# ============================================================================
GLINER_MODEL=urchade/gliner_medium-v2.1
GLINER_THRESHOLD=0.5
TRANSFORMERS_CACHE=/root/.cache/huggingface
HF_HOME=/root/.cache/huggingface

# ============================================================================
# NATS Settings (optional - for production)
# ============================================================================
USE_NATS=false
NATS_URL=nats://localhost:4222
NATS_STREAM=privacy_sessions
NATS_BUCKET=session_store
SESSION_TTL=300  # 5 minutes

# ============================================================================
# Security Settings
# ============================================================================
# API Key authentication (optional)
# API_KEY=your-secret-api-key-here

# Allowed origins for CORS (comma-separated)
# CORS_ORIGINS=http://localhost:3000,https://yourdomain.com

# ============================================================================
# Encryption Settings (KDF-based with automatic 24-hour rotation)
# ============================================================================
# Master key for encrypting session data in NATS.
# Generate with: python -c "from privacy_filter.nats_store import KDFEncryption; print(KDFEncryption.generate_master_key())"
# Or: python -c "import secrets, base64; print(base64.urlsafe_b64encode(secrets.token_bytes(32)).decode())"
#
# When set, all token mappings are encrypted before storage.
# Keys automatically rotate every 24 hours (derived from master key + time period).
# ENCRYPTION_MASTER_KEY=

# Previous master key - ONLY set during emergency key rotation (compromise).
#
# Emergency Rotation Procedure:
# 1. Generate new master key
# 2. Set ENCRYPTION_MASTER_KEY_PREVIOUS to the OLD (compromised) key
# 3. Set ENCRYPTION_MASTER_KEY to the NEW key
# 4. Restart all instances
# 5. Wait 15 minutes (session TTL) for all old sessions to expire
# 6. Remove ENCRYPTION_MASTER_KEY_PREVIOUS
# 7. Restart all instances
#
# This allows decryption of sessions created with the old key during transition.
# ENCRYPTION_MASTER_KEY_PREVIOUS=

# ============================================================================
# Performance Settings
# ============================================================================
# Maximum concurrent requests
MAX_CONCURRENT_REQUESTS=100

# Request timeout (seconds)
REQUEST_TIMEOUT=30

# ============================================================================
# Monitoring & Logging
# ============================================================================
# Log format: json or text
LOG_FORMAT=json

# Enable metrics endpoint
ENABLE_METRICS=false
